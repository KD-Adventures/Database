CREATE TABLE Usuario (
	Login VARCHAR(30) NOT NULL,
	Nome_Usuario VARCHAR(30) NOT NULL,
	CidadeNatal VARCHAR(30) NOT NULL,
	PRIMARY KEY(Login)
);

CREATE TABLE Conhece (
	Login1 VARCHAR(30) NULL,
	Login2 VARCHAR(30) NULL,
	PRIMARY KEY(Login1, Login2),
	FOREIGN KEY(Login1)
		REFERENCES Usuario(Login)
			ON DELETE SET NULL
			ON UPDATE NO ACTION,
	FOREIGN KEY(Login2)
		REFERENCES Usuario(Login)
			ON DELETE SET NULL
			ON UPDATE NO ACTION
);

CREATE TABLE Bloqueia (
	Login1 VARCHAR(30) NULL,
	Login2 VARCHAR(30) NULL,
	PRIMARY KEY(Login1, Login2),
	FOREIGN KEY(Login1)
		REFERENCES Usuario(Login)
			ON DELETE SET NULL
			On UPDATE NO ACTION,
	FOREIGN KEY(Login2)
		REFERENCES Usuario(Login)
			ON DELETE SET NULL
			ON UPDATE NO ACTION			
);

CREATE TABLE Elenco (
	Id_Elenco INTEGER NOT NULL,
	Telefone INTEGER NOT NULL,
	Endere√ßo VARCHAR(50) NOT NULL,
	PRIMARY KEY(Id_Elenco)
);

CREATE TABLE Diretor (
	Id_Elenco INTEGER NULL,
	PRIMARY KEY(Id_Elenco),
	FOREIGN KEY(Id_Elenco)
		REFERENCES Elenco(Id_Elenco)
			ON DELETE CASCADE
			ON UPDATE NO ACTION
);

CREATE TABLE Ator (
	Id_Elenco INTEGER NULL,
	PRIMARY KEY(Id_Elenco),
	FOREIGN KEY(Id_Elenco)
		REFERENCES Elenco(Id_Elenco)
			ON DELETE CASCADE
			ON UPDATE NO ACTION
);

CREATE TABLE Atua (
	Id_Elenco INTEGER NULL,
	Id_Filme INTEGER NULL,
	PRIMARY KEY(Id_Elenco,Id_Filme),
	FOREIGN KEY(Id_Elenco)
		REFERENCES Ator(Id_Elenco)
			ON DELETE SET NULL
			ON UPDATE NO ACTION,
	FOREIGN KEY(Id_Filme)
		REFERENCES Filme(Id_Filme)
			ON DELETE SET NULL
			ON UPDATE NO ACTION
);

CREATE TABLE GostaFilme (
	Login VARCHAR(30) NULL,
	Id_Filme INTEGER NULL,
	PRIMARY KEY(Login, Id_Filme),
	FOREIGN KEY(Login)
		REFERENCES Usuario(Login)
			ON DELETE SET NULL
			ON UPDATE NO ACTION,
	FOREIGN KEY(Id_Filme)
		REFERENCES Filme(Id_Filme)
			ON DELETE SET NULL
			ON UPDATE NO ACTION
);

CREATE TABLE GostaArtista (
	Login VARCHAR(30) NULL,
	Nome_Artista VARCHAR(30) NULL,
	Nota INTEGER NULL,
	PRIMARY KEY(Login, Nome_Artista),
	FOREIGN KEY(Login)
		REFERENCES Usuario(Login)
			ON DELETE SET NULL
			ON UPDATE NO ACTION,
	FOREIGN KEY(Nome_Artista)
		REFERENCES Artista(Nome_Artista)
			ON DELETE SET NULL
			ON UPDATE NO ACTION
);



# para testar
CREATE TABLE Artista (
	Nome_Artista VARCHAR(30) NOT NULL,
	PRIMARY KEY(Nome_Artista)
);

CREATE TABLE Filme (
	Id_Filme INTEGER NOT NULL,
	Id_Diretor INTEGER NULL,
	PRIMARY KEY(Id_Filme),
	FOREIGN KEY(Id_Diretor)
		REFERENCES Diretor(Id_Elenco)
			ON DELETE SET NULL
			ON UPDATE NO ACTION
);
